<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DHCP Server Info</title>
</head>
<body>
    <h1>DHCP Server Info</h1>
    <table border="1">
    <tr>
        <th>MAC Address</th>
        <th>IP Address</th>
        <th>Hostname</th>
        <th>Status</th>
    </tr>
    <tbody id="hostsTableBody">
        <!-- Rows will be added by JavaScript -->
    </tbody>
</table>
<form action="/update-config" method="post">
    <label for="dhcp_offer_after_seconds">DHCP Offer After Seconds:</label>
    <input type="text" id="dhcp_offer_after_seconds" name="dhcp_offer_after_seconds"><br><br>

    <label for="dhcp_acknowledge_after_seconds">DHCP Acknowledge After Seconds:</label>
    <input type="text" id="dhcp_acknowledge_after_seconds" name="dhcp_acknowledge_after_seconds"><br><br>

    <label for="network">Network Address:</label>
    <input type="text" id="network" name="network"><br><br>
    <label for="subnet_mask">Subnet Mask:</label>
    <input type="text" id="subnet_mask" name="subnet_mask"><br><br>
    <label for="router">Router:</label>
    <input type="text" id="router" name="router"><br><br>
    <label for="domain_name_server">DNS Server:</label>
    <input type="text" id="domain_name_server" name="domain_name_server"><br><br>


    <!-- Add other fields as necessary -->

    <input type="submit" value="Update Configurations">
</form>

</body>
</html>
<script>
    function fetchAndUpdate() {
        fetch('/update')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('hostsTableBody');
                tableBody.innerHTML = ''; // Clear the table body

                data.forEach(host => {
                    const row = `<tr>
                                    <td>${host.mac}</td>
                                    <td>${host.ip}</td>
                                    <td>${host.hostname}</td>
                                    <td>${host.is_current ? 'Current' : 'Old'}</td>
                                 </tr>`;
                    tableBody.innerHTML += row; // Add the new row
                });
            })
            .catch(error => console.error('Error fetching data:', error));
    }

    // Fetch and update data every 5 seconds
    setInterval(fetchAndUpdate, 5000);

    // Fetch and update once on initial load
    document.addEventListener('DOMContentLoaded', fetchAndUpdate);
</script>
